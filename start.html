<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_AUTH_DOMAIN",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_STORAGE_BUCKET",
    messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
    appId: "YOUR_APP_ID",
    measurementId: "YOUR_MEASUREMENT_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // 2) Recover userID (URL param → localStorage)
  const params = new URLSearchParams(window.location.search);
  let userID = params.get('userID') || localStorage.getItem('huntUserID');
  if (!userID) {
    alert('No userID—please register first.');
    window.location.href = 'index.html';
  } else {
    localStorage.setItem('huntUserID', userID);
  }

  import { doc, getDoc } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

  async function fetchUserStatus() {
    try {
      const docRef = doc(db, "users", userID);
      const docSnap = await getDoc(docRef);
      if (!docSnap.exists()) {
        alert("User data not found.");
        return;
      }
      const data = docSnap.data();

      // Mark complete if true
      if (data.stationA) document.getElementById('hintA').classList.add('complete');
      if (data.stationB) document.getElementById('hintB').classList.add('complete');
      if (data.stationC) document.getElementById('hintC').classList.add('complete');
      if (data.stationV) document.getElementById('hintV').classList.add('complete');

    } catch (err) {
      console.error(err);
      alert('Could not load your status: ' + err);
    }
  }

  fetchUserStatus();

</script>
