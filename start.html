<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Treasure Hunt Dashboard</title>
  <style>
    .hint { margin: 1em 0; }
    .complete { text-decoration: line-through; color: gray; }
  </style>
</head>
<body>
  <h1>Your Treasure Hunt</h1>
  <div id="hints">
    <div class="hint" id="hintA">ğŸ” Hint A: [describe station A]</div>
    <div class="hint" id="hintB">ğŸ” Hint B: [describe station B]</div>
    <div class="hint" id="hintC">ğŸ” Hint C: [describe station C]</div>
    <div class="hint" id="hintV">ğŸ” Hint V: [volunteer station]</div>
  </div>
  <!-- Later youâ€™ll add your Scan/Code UI here -->
  
  <script>
    // 1) Grab your Web App URL
    const statusURL = 'https://script.google.com/macros/s/AKfycbxsaiE3MEehfH5o85E_lg6qMApdkfm32A9bgwVB4QbFF7lcQ0ypw9Fww_yWOhROAP6EFg/exec'; // include trailing '?' 

    // 2) Recover userID (URL param â†’ localStorage)
    const params = new URLSearchParams(window.location.search);
    let userID = params.get('userID') || localStorage.getItem('huntUserID');
    if (!userID) {
      alert('No userIDâ€”please register first.');
      window.location.href = 'index.html';
    } else {
      localStorage.setItem('huntUserID', userID);
    }

    // 3) Fetch status
    fetch(statusURL + 'userID=' + encodeURIComponent(userID))
      .then(r => r.json())
      .then(data => {
        if (data.error) throw data.error;
        // 4) For each station, if true, mark complete
        if (data.stationA) document.getElementById('hintA').classList.add('complete');
        if (data.stationB) document.getElementById('hintB').classList.add('complete');
        if (data.stationC) document.getElementById('hintC').classList.add('complete');
        if (data.stationV) document.getElementById('hintV').classList.add('complete');
      })
      .catch(err => {
        console.error(err);
        alert('Could not load your status: ' + err);
      });
  </script>
</body>
</html>
